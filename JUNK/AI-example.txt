the Dockerfile file

FROM ubuntu:22.04

RUN apt-get update -y

RUN apt-get install -y \
  xvfb \
  x11-apps \
  xauth

RUN apt-get install -y \
  openconnect

# Create user for VPN application
RUN useradd -ms /bin/bash vpnuser

# Copy files
COPY vpn_start.sh /home/vpnuser/vpn_start.sh

# Setup X11 forwarding
ENV VPN_HOST=""
ENV VPN_USER=""
ENV VPN_PASS=""

ENV DISPLAY=host.docker.internal:0
EXPOSE 5900

# Autostart VPN GUI on container start  
USER vpnuser
ENTRYPOINT ["/bin/bash", "/home/vpnuser/vpn_start.sh"]



the vpn_start.sh file:

#!/bin/bash
openconnect -u ${VPN_USER} -p ${VPN_PASS} -p AnyConnect ${VPN_HOST}
#tail -f /var/log/openconnect.log  